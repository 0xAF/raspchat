!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function n(n,e){for(var t,r=[],o=[],c=arguments.length;c-- >2;)r.push(arguments[c]);for(;r.length;)if(Array.isArray(t=r.pop()))for(c=t.length;c--;)r.push(t[c]);else null!=t&&!0!==t&&!1!==t&&o.push("number"==typeof t?t+="":t);return"string"==typeof n?{type:n,props:e||{},children:o}:n(e||{},o)}function e(n){return n.replace(RegExp("^"+(n.match(/^(\t| )+/)||"")[0],"gm"),"")}function t(n){return(n+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(n){function o(n){var e=u[n.replace(/\*/g,"_")[1]||""],t=d[d.length-1]==n;return e?e[1]?(d[t?"pop":"push"](n),e[0|t]):e[0]:n}function c(){for(var n="";d.length;)n+=o(d[d.length-1]);return n}var i,a,s,l,f,p=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^```(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:\!\[([^\]]*?)\]\(([^\)]+?)\))|(\[)|(\](?:\(([^\)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(\-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,3})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*])/gm,d=[],g="",h=0,v={};for(n=n.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(n,e,t){return v[e.toLowerCase()]=t,""}).replace(/^\n+|\n+$/g,"");s=p.exec(n);)a=n.substring(h,s.index),h=p.lastIndex,i=s[0],a.match(/[^\\](\\\\)*\\$/)||(s[3]||s[4]?i='<pre class="code '+(s[4]?"poetry":s[2].toLowerCase())+'">'+e(t(s[3]||s[4]).replace(/^\n+|\n+$/g,""))+"</pre>":s[6]?((f=s[6]).match(/\./)&&(s[5]=s[5].replace(/^\d+/gm,"")),l=r(e(s[5].replace(/^\s*[>*+.-]/gm,""))),">"===f?f="blockquote":(f=f.match(/\./)?"ol":"ul",l=l.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),i="<"+f+">"+l+"</"+f+">"):s[8]?i='<img src="'+t(s[8])+'" alt="'+t(s[7])+'">':s[10]?(g=g.replace("<a>",'<a href="'+t(s[11]||v[a.toLowerCase()])+'">'),i=c()+"</a>"):s[9]?i="<a>":s[12]||s[14]?i="<"+(f="h"+(s[14]?s[14].length:"="===s[13][0]?1:2))+">"+r(s[12]||s[15])+"</"+f+">":s[16]?i="<code>"+t(s[16])+"</code>":(s[17]||s[1])&&(i=o(s[17]||"--"))),g+=a,g+=i;return(g+n.substring(h)+c()).trim()}var o={toggleSound:function(n,e){return function(t){var r=void 0===t?!n.soundEnabled:t;return Promise.resolve({soundEnabled:r}).then(e.applyState)}},toggleNotification:function(n,e){return function(t){var r=void 0===t?!n.soundEnabled:t;return Promise.resolve({notificationEnabled:r}).then(e.applyState)}},applyState:function(n,e){return function(n){return n}}},c={connect:function(n,e){return function(n){var t=new WebSocket(n.webSocketConnectionUri);t.onopen=e.onOpen(t),t.onclose=e.onClose(t),t.onmessage=e.onMessage(t)}},onOpen:function(n,e){return function(n){return function(e){return{connection:n,connected:!0}}}},onClose:function(n,e){return function(n){return function(n){return{connection:null,connected:!1}}}},onMessage:function(n,e){return function(n){return function(n){try{var t=JSON.parse(n.data);return e.addMessage(t)}catch(e){console.warn("Error while parsing message",n.data)}return{}}}},addMessage:function(n,e){return function(e){e["@"].toLowerCase();var t,r=e.to||"SERVER",o=n.logs[r]||[];return o.push(e),{logs:(t={},t[r]=o,t)}}}},i=function(e,t){return n("div",{onclick:e.onClick,oncreate:e.init},t)},u={"":["<em>","</em>"],_:["<strong>","</strong>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]},a=function(e){return n("div",{class:e.class+" markdown",oncreate:function(n){return function(e){n&&(e.innerHTML=r(n))}}(e.text||"")})},s=function(e,t){return n(a,{class:e["@"],text:e.msg})},l=function(e,t){return e.messages?n("div",null,e.messages.map(function(e){return n(s,e)})):null};(function(e,t){function r(e,t){return e&&n(e.tagName.toLowerCase(),{},t.call(e.childNodes,function(n){return 3===n.nodeType?n.nodeValue:r(n,t)}))}function o(){e.view&&!v&&setTimeout(c,v=!v)}function c(n){for(v=!v,(n=e.view(w,b))&&!v&&(m=h(t,m,y,y=n));n=E.pop();)n()}function i(n,e,t,r){var o=t.modules;u(n,e,t.actions,r),s(n,t.state);for(var c in o)i(n[c]={},e[c]={},o[c],r.concat(c))}function u(n,e,t,r){Object.keys(t||{}).map(function(c){"function"==typeof t[c]?e[c]=function(i){var u=t[c](n=function(n,e){for(var t=0;t<n.length;t++)e=e[n[t]];return e}(r,w),e);return"function"==typeof u&&(u=u(i)),u&&u!==n&&!u.then&&o(w=l(r,a(n,u),w)),u}:u(n[c]||(n[c]={}),e[c]={},t[c],r.concat(c))})}function a(n,e){return s(s({},n),e)}function s(n,e){for(var t in e)n[t]=e[t];return n}function l(n,e,t){var r={};return 0===n.length?e:(r[n[0]]=1<n.length?l(n.slice(1),e,t[n[0]]):e,a(t,r))}function f(n,e){if("string"==typeof n)t=document.createTextNode(n);else{var t=(e=e||"svg"===n.type)?document.createElementNS("http://www.w3.org/2000/svg",n.type):document.createElement(n.type);for(n.props.oncreate&&E.push(function(){n.props.oncreate(t)}),r=0;r<n.children.length;r++)t.appendChild(f(n.children[r],e));for(var r in n.props)p(t,r,n.props[r])}return t}function p(n,e,t,r){if("key"===e);else if("style"===e)for(var e in a(r,t=t||{}))n.style[e]=t[e]||"";else{try{n[e]=null==t?"":t}catch(n){}"function"!=typeof t&&(null==t||!1===t?n.removeAttribute(e):n.setAttribute(e,t))}}function d(n,e,t){function r(){n.removeChild(e)}t&&t.onremove?t.onremove(e,r):r()}function g(n){if(n&&n.props)return n.props.key}function h(n,e,t,r,o,c){if(t===r);else if(null==t)e=n.insertBefore(f(r,o),e);else if(null!=r.type&&r.type===t.type){!function(n,e,t){for(var r in a(e,t)){var o=t[r],c="value"===r||"checked"===r?n[r]:e[r];o!==c&&p(n,r,o,c)}t.onupdate&&E.push(function(){t.onupdate(n,e)})}(e,t.props,r.props),o=o||"svg"===r.type;for(var i=r.children.length,u=t.children.length,s={},l=[],v={},m=0;m<u;m++)w=l[m]=e.childNodes[m],null!=($=g(b=t.children[m]))&&(s[$]=[w,b]);for(var m=0,y=0;y<i;){var w=l[m],b=t.children[m],C=r.children[y];if(v[$=g(b)])m++;else{var k=g(C),S=s[k]||[];null==k?(null==$&&(h(e,w,b,C,o),y++),m++):($===k?(h(e,S[0],S[1],C,o),m++):S[0]?(e.insertBefore(S[0],w),h(e,S[0],S[1],C,o)):h(e,w,null,C,o),y++,v[k]=C)}}for(;m<u;){var $=g(b=t.children[m]);null==$&&d(e,l[m],b.props),m++}for(var m in s){var x=(S=s[m])[1];v[x.props.key]||d(e,S[0],x.props)}}else e&&r!==e.nodeValue&&("string"==typeof r&&"string"==typeof t?e.nodeValue=r:(e=n.insertBefore(f(r,o),c=e),d(n,c,t.props)));return e}var v,m=(t=t||document.body).children[0],y=r(m,[].map),w={},b={},E=[];return o(i(w,b,e,[])),b})({state:{config:{},settings:{soundEnabled:!0,notificationEnabled:!0},channels:{connected:!1,connection:null,logs:{}}},actions:{config:{load:function(n,e){return function(n){return n}}},settings:o,channels:c},view:function(e,t){return n(i,{init:function(n){return t.channels.connect(e.config)}},n(l,{messages:e.channels.logs.SERVER}))}}).config.load(window.RaspConfig)});
//# sourceMappingURL=app.js.map
